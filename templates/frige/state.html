{% extends 'base.html' %} 

{% block content %}
{% if friges %}
    <div class="row">
        <!-- 냉장고 테이블 목록 -->
        {% for frige in friges %}
            <div class="card" style="width: 50rem;">
                <div class="card-body">
                    <h5 class="card-title">Refrigerator {{ frige.id }}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ frige.name }}</h6>
                    <ul>
                        <!-- 냉장고 품목 (이름 + 수량) -->
                        {% for item in frige.items.all %}
                            <li>
                                {{ item.drink.name }} - Quantity: <span class="result" data-item-id="{{ item.id }}">{{ item.quantity }}</span>
                                <div class="quantity">
                                    <span class="count">
                                        <a href="#" class="minus" data-item-id="{{ item.id }}">-</a>
                                        <span class="result" data-item-id="{{ item.id }}">{{ item.quantity }}</span>
                                        <a href="#" class="plus" data-item-id="{{ item.id }}">+</a>
                                    </span>    
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock content %}

{%block script%}
<script type = "text/javascript">
    let plus = document.querySelector(".plus")
    let minus = document.querySelector(".minus")
    let result = document.querySelector("#result")
    let result_int = Number(result.textContent)

    plus.addEventListener("click", () => {
        result_int++
        result.textContent = result_int.toLocaleString();
    })
    minus.addEventListener("click", () => {
        if (result_int > 0) {
            result_int--
            result.textContent = result_int.toLocaleString();
        }
    })
</script>
{%endblock script%}